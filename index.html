<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Sueldo Semanal y Tarifas</title>
    
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/vicidominisanti/CALCULARSUELDOTMT/main/fondo.png">

    <style>
        body { 
            font-family: sans-serif; 
            max-width: 1000px; /* Aumentamos el ancho para que la tabla quepa al lado */
            margin: 50px auto; 
            padding: 20px; 
            border: 1px solid #ccc; 
            border-radius: 12px; 
            
            /* Fondo de imagen */
            background-image: url('https://raw.githubusercontent.com/vicidominisanti/CALCULARSUELDOTMT/main/fondo.png'); 
            background-size: cover; 
            background-attachment: fixed;
            background-color: #333; 
            color: #000;
        }
        
        /* Contenedor principal para la calculadora y la tabla lado a lado */
        .main-container {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        .calculadora-section {
            flex: 2; /* Ocupa 2/3 del espacio */
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
        }
        .tabla-section {
            flex: 1; /* Ocupa 1/3 del espacio */
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
        }

        /* Estilos generales */
        h1, h2 { color: #000; text-shadow: 1px 1px 3px rgba(255, 255, 255, 0.9); }
        label { 
            color: #000; font-weight: bold; 
            background-color: rgba(255, 255, 255, 0.8);
            padding: 4px; border-radius: 4px; display: block; margin-top: 15px; 
        }
        input[type="number"] { width: 100%; padding: 10px; margin-top: 5px; box-sizing: border-box; border: 1px solid #ddd; border-radius: 4px; }
        .resultado-box { margin-top: 20px; padding: 15px; border: 2px solid #007bff; border-radius: 8px; background-color: #e9f5ff; }
        .resaltado { font-size: 1.4em; font-weight: bold; color: #d9534f; display: block; margin-top: 5px; }
        .resaltado-semanal { font-size: 1.8em; font-weight: bold; color: #28a745; display: block; margin-top: 10px; }
        .turno-input { display: flex; gap: 15px; }
        .turno-input > div { flex-grow: 1; }

        /* Estilos de la tabla de puestos */
        #tablaPuestos {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        #tablaPuestos th, #tablaPuestos td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }
        #tablaPuestos th {
            background-color: #007bff;
            color: white;
            font-size: 0.9em;
        }
        /* Clase para el input dentro de la tabla */
        .editable-input {
            width: 80px;
            padding: 4px;
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="calculadora-section">
            <h1>Calculadora de Sueldo Semanal</h1>

            <label for="tarifa">Tarifa por Hora Tarde/Noche ($) (ej: 5327)</label>
            <input type="number" id="tarifa" value="5327" min="0" oninput="actualizarCalculos()">
            
            <label for="tarifaMediodia">Tarifa por Hora Turno Mediodía ($) (ej: 5452)</label>
            <input type="number" id="tarifaMediodia" value="5452" min="0" oninput="actualizarCalculos()">

            <h2>1. Valores por Turno (Referencia)</h2>
            <div class="turno-input">
                <div>
                    <p><strong>Día Normal (4,5 hs)</strong></p>
                    <p>Pago por día: <span id="pagoDiaNormal" class="resaltado">$0.00</span></p>
                </div>
                <div>
                    <p><strong>Día Largo/Extra (6,5 hs)</strong></p>
                    <p>Pago por día: <span id="pagoDiaLargo" class="resaltado">$0.00</span></p>
                </div>
                <div>
                    <p><strong>Día Mediodía (4,0 hs)</strong></p>
                    <p>Pago por día: <span id="pagoDiaMediodia" class="resaltado">$0.00</span></p>
                </div>
            </div>
            
            <h2>2. Total Semanal</h2>
            <div class="turno-input">
                <div>
                    <label for="diasNormales">Total Días Normales</label>
                    <input type="number" id="diasNormales" value="3" min="0" oninput="actualizarCalculos()">
                </div>
                <div>
                    <label for="diasLargos">Total Días Largos</label>
                    <input type="number" id="diasLargos" value="1" min="0" oninput="actualizarCalculos()">
                </div>
                <div>
                    <label for="diasMediodia">Total Días Mediodía</label>
                    <input type="number" id="diasMediodia" value="0" min="0" oninput="actualizarCalculos()">
                </div>
            </div>

            <div class="resultado-box">
                <h3>Resumen Semanal</h3>
                <p>Subtotal Normal: <span id="subtotalNormal" class="resaltado">$0</span></p>
                <p>Subtotal Largo: <span id="subtotalLargo" class="resaltado">$0</span></p>
                <p>Subtotal Mediodía: <span id="subtotalMediodia" class="resaltado">$0</span></p>
                <p><strong>SUELDO BRUTO SEMANAL:</strong> <span id="totalSemanal" class="resaltado-semanal">$0</span></p>
            </div>
        </div>

        <div class="tabla-section">
            <h2>Tarifas por Puesto (Verano 2026)</h2>
            <table id="tablaPuestos">
                <thead>
                    <tr>
                        <th>Puesto / Rol</th>
                        <th>Tarifa por Hora ($)</th>
                    </tr>
                </thead>
                <tbody id="puestosBody">
                    </tbody>
            </table>
            <p style="font-size: 0.8em; margin-top: 15px;">*Los cambios se guardan automáticamente en tu navegador.</p>
        </div>
    </div>
    
    <script>
        // --- CONSTANTES DE HORAS ---
        const TARIFA_NORMAL_HS = 4.5;
        const TARIFA_LARGA_HS = 6.5;
        const TARIFA_MEDIODIA_HS = 4.0;
        
        // --- DATA DE PUESTOS (Valores iniciales) ---
        // Usamos un nombre claro y una tarifa inicial
        const PUESTOS_INICIALES = [
            { nombre: "Encargado / Jefe", tarifa: 7800 },
            { nombre: "Cocinero Principal", tarifa: 6500 },
            { nombre: "Ayudante de Cocina", tarifa: 5800 },
            { nombre: "Mozo / Mesero", tarifa: 5600 },
            { nombre: "Cajero", tarifa: 5400 },
            { nombre: "Cadete / Limpieza", tarifa: 4900 }
        ];

        // Función que carga los datos de la tabla desde el almacenamiento local
        function cargarPuestos() {
            let puestos;
            // Intentamos cargar la data guardada previamente
            const savedPuestos = localStorage.getItem('tarifasPuestos');
            
            if (savedPuestos) {
                puestos = JSON.parse(savedPuestos);
            } else {
                // Si no hay data guardada, usamos los valores iniciales
                puestos = PUESTOS_INICIALES;
                guardarPuestos(puestos); // Guardamos los iniciales para la próxima vez
            }
            
            const tbody = document.getElementById('puestosBody');
            tbody.innerHTML = ''; // Limpiamos la tabla
            
            puestos.forEach((puesto, index) => {
                const row = tbody.insertRow();
                row.insertCell().textContent = puesto.nombre;
                
                const inputCell = row.insertCell();
                const input = document.createElement('input');
                
                input.type = 'number';
                input.className = 'editable-input';
                input.value = puesto.tarifa;
                
                // Evento para guardar el cambio automáticamente
                input.oninput = function() {
                    actualizarTarifaPuesto(index, parseFloat(this.value));
                };
                
                inputCell.appendChild(input);
            });
        }

        // Función para guardar la data actualizada en el navegador
        function guardarPuestos(puestos) {
            localStorage.setItem('tarifasPuestos', JSON.stringify(puestos));
        }

        // Función que actualiza y guarda una tarifa específica
        function actualizarTarifaPuesto(index, nuevaTarifa) {
            const savedPuestos = localStorage.getItem('tarifasPuestos');
            let puestos = savedPuestos ? JSON.parse(savedPuestos) : PUESTOS_INICIALES;
            
            // Si la tarifa no es válida, la dejamos como estaba, si no, la actualizamos
            if (!isNaN(nuevaTarifa) && nuevaTarifa >= 0) {
                puestos[index].tarifa = nuevaTarifa;
                guardarPuestos(puestos);
            }
        }

        // Función principal de la Calculadora (mantenida de la versión anterior)
        function actualizarCalculos() {
            // Obtener inputs de tarifas
            const tarifa = parseFloat(document.getElementById('tarifa').value);
            const tarifaMediodia = parseFloat(document.getElementById('tarifaMediodia').value);
            
            // Obtener inputs de días
            const diasNormales = parseInt(document.getElementById('diasNormales').value) || 0;
            const diasLargos = parseInt(document.getElementById('diasLargos').value) || 0;
            const diasMediodia = parseInt(document.getElementById('diasMediodia').value) || 0;
            
            // Validaciones
            if (isNaN(tarifa) || tarifa < 0 || isNaN(tarifaMediodia) || tarifaMediodia < 0) {
                document.getElementById('totalSemanal').textContent = '$0.00';
                return;
            }

            // --- CÁLCULO DE UN SOLO DÍA (Referencia) ---
            const pagoDiaNormal = tarifa * TARIFA_NORMAL_HS;
            const pagoDiaLargo = tarifa * TARIFA_LARGA_HS;
            const pagoDiaMediodia = tarifaMediodia * TARIFA_MEDIODIA_HS;


            document.getElementById('pagoDiaNormal').textContent = `$${pagoDiaNormal.toFixed(2)}`;
            document.getElementById('pagoDiaLargo').textContent = `$${pagoDiaLargo.toFixed(2)}`;
            document.getElementById('pagoDiaMediodia').textContent = `$${pagoDiaMediodia.toFixed(2)}`;


            // --- CÁLCULO SEMANAL ---
            const subtotalNormal = pagoDiaNormal * diasNormales;
            const subtotalLargo = pagoDiaLargo * diasLargos;
            const subtotalMediodia = pagoDiaMediodia * diasMediodia;

            const totalSemanal = subtotalNormal + subtotalLargo + subtotalMediodia;
            
            // Mostrar resultados semanales
            document.getElementById('subtotalNormal').textContent = `$${subtotalNormal.toFixed(2)}`;
            document.getElementById('subtotalLargo').textContent = `$${subtotalLargo.toFixed(2)}`;
            document.getElementById('subtotalMediodia').textContent = `$${subtotalMediodia.toFixed(2)}`;
            document.getElementById('totalSemanal').textContent = `$${totalSemanal.toFixed(2)}`;
        }

        // Ejecutar las funciones al cargar la página
        window.onload = function() {
            cargarPuestos(); // Carga la tabla de puestos
            actualizarCalculos(); // Ejecuta el cálculo de la calculadora
        };
    </script>
</body>
</html>
